{{ define "main" }}

<div class="regular">

<p>
Ideas:
{{range $name, $taxonomy := .Site.Taxonomies.ideas}} {{ $cnt := .Count }}
  {{ with $.Site.GetPage (printf "/ideas/%s" $name) }}
	<a class="game-tag" href={{ .RelPermalink }} title="{{$name}}</i>">{{$name}}</a>
  {{end}}
{{end}}
</p>

<p>
Platforms:
{{range $name, $taxonomy := .Site.Taxonomies.platforms}} {{ $cnt := .Count }}
  {{ with $.Site.GetPage (printf "/platforms/%s" $name) }}
	<a class="game-tag" href={{ .RelPermalink }} title="{{$name}}</i>">{{$name}}</a>
  {{end}}
{{end}}
</p>

<p>
Tools:
{{range $name, $taxonomy := .Site.Taxonomies.tools}} {{ $cnt := .Count }}
  {{ with $.Site.GetPage (printf "/tools/%s" $name) }}
	<a class="game-tag" href={{ .RelPermalink }} title="{{$name}}</i>">{{$name}}</a>
  {{end}}
{{end}}
</p>

<div class="list">
{{ range .Pages.ByPublishDate.Reverse }}
  {{ if not (in .Params.tags "inprogress") }}
  <!-- Get the link -->
  {{ $link := "" }}
  {{ if isset .Params "link" }}
    {{ $link = .Params.Link }}
  {{ else }}
    {{ $link = .RelPermalink }}
  {{ end }}
  <div class="item">
    <div class="list-image">
      <a href="{{ $link }}"><img src="{{ .RelPermalink }}{{ .Params.ListImage }}"></a>
    </div>
    <div class="list-text">
      <a href="{{ $link }}">{{ .Title }}</a>
      <p>{{ .Params.Description | markdownify }}</p>
      <div class="game-tags">
        {{ range (.GetTerms "tags") }}
        {{ if ne .LinkTitle "project" }}
        <a class="game-tag" href="{{ .Permalink }}">{{ .LinkTitle }}</a>
        {{ end }}
        {{ end }}
        {{ range (.GetTerms "platforms") }}
        {{ if ne .LinkTitle "project" }}
        <a class="game-tag" href="{{ .Permalink }}">{{ .LinkTitle }}</a>
        {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
  {{ end }}
{{ end }}
</div>
</div>
{{ end }}
